<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Oswald:200,600" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <title>Dash Start Page</title>
</head>

<body>
  <script>
    function runScript(e) {
      if (e.keyCode == 13) {
        e.preventDefault();
        var input = $("#text-input").val().trim();
        var command = "";
        var search = "";
        var foo;
        $("#text-input").val("");
        
        command = input.substring(0, input.indexOf("-") + 1).toUpperCase();
        search = input.substring(input.indexOf("-") + 1);

        search = search.trim();

        // ********* THIS IS BEING TESTED *********

        // var test = [
        //   {
        //     "cmd": "G-",
        //     "search": search,
        //     "URL": "http://github.com/",
        //     "searchURL": "search?q="
        //   }
        // ]

        // function testFunc() {
        //   for(var i = 0; i < test.length; i++) {
        //     if(command === test[i].cmd) {
        //       foo = test[i];
        //       runFuncTest();
        //     }
        //   }
        // }
        // testFunc();

        // function runFuncTest() {
        //   window.open(foo.URL + foo.searchURL + foo.search);
        // }          
        // ****************************************

        switch (command.toUpperCase()) {
          case "G-":
            githubSearch();
            break;
          case "Y-":
            youtubeSearch();
            break;
          case "R-":
            redditSearch();
            break;
          case "W-":
            wakaTime();
            break;
          case "RI-":
            replIt();
            break;
          case "SO-":
            stackoverflowSearch();
            break;
          case "MDN-":
            mdnSearch();
            break;
          default:
            {
              if (command[0] != "-") {
                search = "";
                for (var i = 0; i < input.length; i++) {
                  search += input[i];
                }
                window.open("http://google.com/search?q=" + search);
              }
            }
        }

        function githubSearch() {
          if (search === "") {
            window.open("https://github.com/");
          } else {
            window.open("https://github.com/search?q=" + search);
          }
        }

        function youtubeSearch() {
          window.open("https://youtube.com/search?q=" + search);
        }

        function redditSearch() {
          window.open("https://www.reddit.com/search?q=" + search);
        }

        function wakaTime() {
          window.open("https://wakatime.com/dashboard");
        }

        function replIt() {
          window.open("http://repl.it/languages/JavaScript");
        }

        function stackoverflowSearch() {
          window.open("https://stackoverflow.com/search?q=" + search);
        }

        function mdnSearch() {
          window.open("https://developer.mozilla.org/en-US/search?q=" + search);
        }

        return false;
      }
    }
  </script>

  <div id="clock-wrapper">
    <div id="date"></div>
    <div id="time"></div>
  </div>

  <div id="input-wrapper">
    <form id="form">
      <input id="text-input" type="text" onkeypress="return runScript(event)" autofocus autocomplete="false">
    </form>
  </div>

  <script src="main.js"></script>
</body>

</html>